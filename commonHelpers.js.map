{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '45042225-41fd9f6f9757e1f3272f741dc';\nconst API_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet gallery = new SimpleLightbox('.gallery a');\n\nconst form = document.getElementById('search-form');\nconst galleryDiv = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  searchQuery = event.target.elements.query.value.trim();\n  currentPage = 1;\n  totalHits = 0;\n  galleryDiv.innerHTML = '';\n  loadMoreBtn.classList.add('hidden');\n  fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', fetchImages);\n\nasync function fetchImages() {\n  if (!searchQuery) return;\n  try {\n    const response = await axios.get(API_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: PER_PAGE,\n      },\n    });\n\n    totalHits = response.data.totalHits;\n\n    if (response.data.hits.length === 0 && currentPage === 1) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    renderImages(response.data.hits);\n    gallery.refresh();\n    currentPage += 1;\n\n    if (galleryDiv.children.length < totalHits) {\n      loadMoreBtn.classList.remove('hidden');\n    } else {\n      loadMoreBtn.classList.add('hidden');\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n}\n\nfunction renderImages(images) {\n  const markup = images\n    .map(image => {\n      return `<a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                    <div class=\"info\">\n                        <p><b>Likes</b>: ${image.likes}</p>\n                        <p><b>Views</b>: ${image.views}</p>\n                        <p><b>Comments</b>: ${image.comments}</p>\n                        <p><b>Downloads</b>: ${image.downloads}</p>\n                    </div>\n                </a>`;\n    })\n    .join('');\n  galleryDiv.insertAdjacentHTML('beforeend', markup);\n\n  const { height: cardHeight } =\n    galleryDiv.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","API_URL","PER_PAGE","currentPage","searchQuery","totalHits","gallery","SimpleLightbox","form","galleryDiv","loadMoreBtn","event","fetchImages","response","axios","Notiflix","renderImages","error","images","markup","image","cardHeight"],"mappings":"owBAKA,MAAMA,EAAU,qCACVC,EAAU,2BACVC,EAAW,GAEjB,IAAIC,EAAc,EACdC,EAAc,GACdC,EAAY,EACZC,EAAU,IAAIC,EAAe,YAAY,EAE7C,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAa,SAAS,eAAe,SAAS,EAC9CC,EAAc,SAAS,eAAe,WAAW,EAEvDF,EAAK,iBAAiB,SAAUG,GAAS,CACvCA,EAAM,eAAc,EACpBP,EAAcO,EAAM,OAAO,SAAS,MAAM,MAAM,OAChDR,EAAc,EACdE,EAAY,EACZI,EAAW,UAAY,GACvBC,EAAY,UAAU,IAAI,QAAQ,EAClCE,GACF,CAAC,EAEDF,EAAY,iBAAiB,QAASE,CAAW,EAEjD,eAAeA,GAAc,CAC3B,GAAKR,EACL,GAAI,CACF,MAAMS,EAAW,MAAMC,EAAM,IAAIb,EAAS,CACxC,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAUD,CACX,CACP,CAAK,EAID,GAFAG,EAAYQ,EAAS,KAAK,UAEtBA,EAAS,KAAK,KAAK,SAAW,GAAKV,IAAgB,EAAG,CACxDY,EAAS,OAAO,QACd,0EACR,EACM,MACD,CAEDC,EAAaH,EAAS,KAAK,IAAI,EAC/BP,EAAQ,QAAO,EACfH,GAAe,EAEXM,EAAW,SAAS,OAASJ,EAC/BK,EAAY,UAAU,OAAO,QAAQ,GAErCA,EAAY,UAAU,IAAI,QAAQ,EAClCK,EAAS,OAAO,KACd,4DACR,EAEG,OAAQE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,CAEA,SAASD,EAAaE,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IAAIE,GACI,YAAYA,EAAM,aAAa;AAAA,gCACZA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,2CAE3BA,EAAM,KAAK;AAAA,2CACXA,EAAM,KAAK;AAAA,8CACRA,EAAM,QAAQ;AAAA,+CACbA,EAAM,SAAS;AAAA;AAAA,qBAGzD,EACA,KAAK,EAAE,EACVX,EAAW,mBAAmB,YAAaU,CAAM,EAEjD,KAAM,CAAE,OAAQE,CAAY,EAC1BZ,EAAW,kBAAkB,wBAC/B,OAAO,SAAS,CACd,IAAKY,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}